<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Fixel is a color matching game! Ad free with tons of levels.</title>
</head>
<body>
    <script>
        const urls = {
            windows: "https://store.steampowered.com/app/1578290/Pixel_Fixel/",
            macos: "https://apps.apple.com/ca/app/pixel-fixel/id6504993028",
            linux: "https://play.google.com/store/apps/details?id=com.bluepinstudio.pixelfixel",
            ios: "https://apps.apple.com/ca/app/pixel-fixel/id6504993028",
            android: "https://play.google.com/store/apps/details?id=com.bluepinstudio.pixelfixel",
        };

        const logVisit = (platform) => {
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbxlHeIKXSssy0cbLkRMcUDQyI4KPKHLpvtlfP1cqNS9Mn9ELy805sKo01ZoF5vfPzcGaw/exec';
            fetch(`${scriptUrl}?platform=${platform}`)
                .then(response => response.text())
                .then(result => console.log('Log Visit Result:', result))
                .catch(error => console.error('Error logging visit:', error));
        };

        (function handleRedirect() {
            const userAgent = window.navigator.userAgent || window.navigator.vendor || window.opera;

            console.log('User Agent:', userAgent);

            let url = urls.windows; // Default URL
            let platformKey = 'undetected platform'; // Default platform

            if (/iPhone|iPad|iPod/.test(userAgent)) {
                platformKey = 'ios';
                url = urls.ios;
            } else if (/Android/.test(userAgent)) {
                platformKey = 'android';
                url = urls.android;
            } else if (/Macintosh|MacIntel|MacPPC|Mac68K/.test(userAgent)) {
                platformKey = 'macos';
                url = urls.macos;
            } else if (/Linux/.test(userAgent)) {
                platformKey = 'linux';
                url = urls.linux;
            } else if (/Win32|Win64|Windows|WinCE/.test(userAgent)) {
                platformKey = 'windows';
                url = urls.windows;
            }

            console.log('Detected Platform Key:', platformKey);
            logVisit(platformKey);
            window.location.href = url;
        })();
    </script>
</body>
</html>
