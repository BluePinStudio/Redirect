<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OS Redirector</title>
</head>
<body>
    <script>
        // EDIT THESE
        const urls = {
            windows: "https://store.steampowered.com/app/1578290/Pixel_Fixel/",
            macos: "https://www.apple.com/ca/app-store/",
            linux: "https://store.steampowered.com/app/1578290/Pixel_Fixel/",
            ios: "https://www.apple.com/ca/app-store/",
            android: "https://play.google.com/store/apps/details?id=com.bluepinstudio.pixelfixel",
        };

        const logVisit = (platform) => {
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbzFc_CyEKoWvesFU03cdBhqu9GrIcy7lDVSyK3oPSunh7Uxb_skC6GSTwIxbsnT7ky6lA/exec'; 
            fetch(`${scriptUrl}?platform=${platform}`)
                .then(response => response.text())
                .then(result => console.log(result))
                .catch(error => console.error('Error logging visit:', error));
        };

        (function handleRedirect() {
            const platform = window.navigator?.userAgentData?.platform || window.navigator.platform;
            const userAgent = window.navigator.userAgent;

            console.log('Platform:', platform);
            console.log('User Agent:', userAgent);

            let url = urls.windows; // Default URL

            const platformToUrl = {
                'Macintosh': urls.macos,
                'MacIntel': urls.macos,
                'MacPPC': urls.macos,
                'Mac68K': urls.macos,
                'iPhone': urls.ios,
                'iPad': urls.ios,
                'iPod': urls.ios,
                'Win32': urls.windows,
                'Win64': urls.windows,
                'Windows': urls.windows,
                'WinCE': urls.windows,
                'Linux': urls.linux
            };

            let platformKey = 'Windows';
            if (/iPhone|iPad|iPod/.test(userAgent)) {
                platformKey = 'ios';
                url = urls.ios;
            } else if (/Android/.test(userAgent)) {
                platformKey = 'Android';
                url = urls.android;
            } else if (platformToUrl[platform]) {
                platformKey = platform;
                url = platformToUrl[platform];
            }

            console.log('Detected Platform Key:', platformKey);
            logVisit(platformKey);
            window.location.href = url;
        })();
    </script>
</body>
</html>